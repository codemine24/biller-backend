generator client {
  provider = "prisma-client"
  output   = "./generated"
}

datasource db {
  provider = "postgresql"
}

model Subscriber {
  id         String           @id @default(uuid())
  name       String
  address    String
  status     SubscriberStatus @default(HOLD)
  created_at DateTime         @default(now())
  updated_at DateTime         @updatedAt
  users      User[]

  @@map("subscribers")
}

model User {
  id                  String     @id @default(uuid())
  first_name          String
  last_name           String?
  email               String?    @unique
  contact_number      String     @unique
  password            String
  avatar              String?
  role                UserRole
  status              UserStatus @default(ACTIVE)
  is_deleted          Boolean    @default(false)
  password_changed_at DateTime?
  subscriber_id       String?
  created_at          DateTime   @default(now())
  updated_at          DateTime   @updatedAt

  subscriber Subscriber? @relation(fields: [subscriber_id], references: [id])

  @@map("users")
}

enum UserRole {
  OWNER
  SUPER_ADMIN
  ADMIN
  BRANCH_MANAGER
  VENDOR
  CUSTOMER
}

enum UserStatus {
  ACTIVE
  BLOCKED
}

enum SubscriberStatus {
  ACTIVE
  BLOCKED
  HOLD
}
